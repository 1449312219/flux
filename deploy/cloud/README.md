# Using Weave Cloud

Flux comes in two parts: the service, which serves the API for the
command-line client to use, and the daemon, which carries out some
tasks on behalf of the service.

It's possible to run both yourself, but usually you would just run the
daemon in your cluster and connect to the service running in Weave
Cloud.

## Flux daemon deployment

Sign up with [Weave Cloud](https://cloud.weave.works) and create an
instance to represent your cluster. If you're already using Scope or
Cortex to look at a cluster, you can choose that instance instead of
creating one.

We need the "service token" for your instance, which is a string of
random characters generated by Weave Cloud, like
`dkmbr4spss8r4iz1115xo89pzjfib8h7`. You can get this from the settings
page for the instance.

Now you can replace the dummy value in the deployment config given in
this directory:

```diff
@@ -15,4 +15,4 @@ spec:
         image: quay.io/weaveworks/fluxd:master-6cc08e4
         imagePullPolicy: IfNotPresent
         args:
-        - --token=INSERTTOKENHERE
+        - --token=dkmbr4spss8r4iz1115xo89pzjfib8h7
```

and create it in your cluster:

```sh
$ kubectl apply -f ./flux-dep.yaml
```

If you set the environment variable `FLUX_SERVICE_TOKEN`, the
command-line client will be able to tell you about your cluster. (You
can also supply the token explicitly on each invocation with the
argument `--token`)

```sh
$ export FLUX_SERVICE_TOKEN=dkmbr4spss8r4iz1115xo89pzjfib8h7
$ fluxctl list-services
```

You'll need to supply a few configuration values to be able to do
automated deployments; this is described in the main usage
[README.md](../README.md).
